<!--/* Thymeleaf templating engine, Each token will be replaced by their respective titles in the resulting page. */-->
<html xmlns:th="http://www.thymeleaf.org" layout:decorate="~{layout}">

<head>
    <meta charset="UTF-8"/>
    <title>Home</title>
    <link rel="icon" href="#" th:href="@{/img/favicon.ico}" type="image/x-icon"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
</head>
<body>
<div layout:fragment="content">

    <h1>Opus Solutions Manager</h1>
     <section class="content">
      
      <div class="row">
        <div class="col-lg-3 col-xs-6">
          <div class="small-box bg-aqua">
            <div class="inner">
              <h3 th:text="${session.qtdSeguros}"></h3>

              <p>Total de Seguros</p>
            </div>
            <div class="icon">
              <i class="ion ion-bag"></i>
            </div>
            <a href="#" class="small-box-footer">Detalhes <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>

        <div class="col-lg-3 col-xs-6">
          <div class="small-box bg-green">
            <div class="inner">
              <h3 th:text="${session.qtdSegurosThisMonth}"></h3>

              <p>Seguros fechados do Mês</p>
            </div>
            <div class="icon">
              <i class="ion ion-stats-bars"></i>
            </div>
            <a href="#" class="small-box-footer">Detalhes <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        
        <div class="col-lg-3 col-xs-6">
          <div class="small-box bg-yellow">
            <div class="inner">
              <h3 th:text="${session.qtdRenovacoesThisMonth}"></h3>

              <p>Renovações do Mês</p>
            </div>
            <div class="icon">
              <i class="ion ion-person-add"></i>
            </div>
            <a href="#" class="small-box-footer">Detalhes <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
      
        <div class="col-lg-3 col-xs-6">
          <div class="small-box bg-red">
            <div class="inner">
              <h3 th:text="${session.qtdLost}"></h3>
              <p>Seguros Perdidos do Mês</p>
            </div>
            <div class="icon">
              <i class="ion ion-pie-graph"></i>
            </div>
            <a href="#" class="small-box-footer">Detalhes <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
      </div>
      
      <div class="row">
		  <div class="col-sm-6">
			  <div class="box-header">
	              <i class="fa fa-th"></i>
	
	              <h3 class="box-title">Gráfico de Seguros</h3>
		            </div>
	            <div class="box-body border-radius-none">
	            <canvas id="lineChart" width="800" height="450"></canvas>
            </div>
		  </div>
		  <div class="col-sm-6">
			  <div class="box-header">
	              <i class="fa fa-th"></i>
	
	              <h3 class="box-title">Seguros por Seguradora</h3>
	            </div>
	            <div class="box-body border-radius-none">
	            	<canvas id="bar-chart-grouped" width="800" height="450"></canvas>
	            </div>
		  </div>
	</div>
    </section>
</div>
</body>
</html>

<script>
//Bar chart
new Chart(document.getElementById("bar-chart-grouped"), {
    type: 'bar',
    data: {
      labels: ["Automotivo"],
      datasets: [
        {
          label: "Porto Seguro",
          backgroundColor: "#3e95cd",
          data: [5]
        }, {
          label: "Azul Seguros",
          backgroundColor: "#66ffff",
          data: [5]
        }, {
          label: "Itáu",
          backgroundColor: "#ffff00",
          data: [2]
        }, {
          label: "Tokio Marine",
          backgroundColor: "#33cc33",
          data: [4]
        }, {
          label: "Allianz",
          backgroundColor: "#3333ff",
          data: [1]
        }, {
          label: "Liberty Seguros",
          backgroundColor: "#99ccff",
          data: [2]
        }, {
          label: "Suhai",
          backgroundColor: "#66ff99",
          data: [1]
        }, {
          label: "HDI",
          backgroundColor: "#ffcc66",
          data: [1]
        }, {
          label: "BRADESCO",
          backgroundColor: "#ff3300",
          data: [2]
        }, {
          label: "MAPFRE",
          backgroundColor: "#cc9900",
          data: [3]
        }
        
      ]
    },
    options: {
      title: {
        display: true,
        text: 'Crescimento Mensal'
      }
    }
});


var jsonfile = {
		   "jsonarraychartline": [{
			      "mes": "Janeiro",
			      "totalMes": 12
			   }, {
			      "mes": "Fevereiro",
			      "totalMes": 0
			   }, {
			      "mes": "Março",
			      "totalMes": 0
			   }, {
			      "mes": "Abril",
			      "totalMes": 0
			   }, {
			      "mes": "Maio",
			      "totalMes": 0
			   }, {
			      "mes": "Junho",
			      "totalMes": 0
			   }, {
			      "mes": "Julho",
			      "totalMes": 0
			   }, {
			      "mes": "Agosto",
			      "totalMes": 0
			   }, {
			      "mes": "Setembro",
			      "totalMes": 0
			   }, {
			      "mes": "Outubro",
			      "totalMes": 0
			   }, {
			      "mes": "Novembro",
			      "totalMes": 0
			   }, {
			      "mes": "Dezembro",
			      "totalMes": 0
			   }]
		};

		var labels = jsonfile.jsonarraychartline.map(function(e) {
		   return e.mes;
		});
		var data = jsonfile.jsonarraychartline.map(function(e) {
		   return e.totalMes;
		});;

		var ctx = lineChart.getContext('2d');
		var config = {
		   type: 'line',
		   data: {
		      labels: labels,
		      datasets: [{
		         label: 'Crescimento Mensal de Seguros Opus 2019',
		         data: data,
		         backgroundColor: 'rgba(0, 119, 204, 0.3)'
		      }]
		   }
		};

		var chart = new Chart(ctx, config);


// new Chart(document.getElementById("line-chart"), {
// 	  type: 'line',
// 	  data: {
// 	    labels: ["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro", "Dezembro"],
// 	    datasets: [{ 
// 	        data: [1,5,10,16,27,10,50,35,22,77,100,90],
// 	        label: "Seguros",
// 	        borderColor: "red",
// 	        fill: false
// 	      }
// 	    ]
// 	  },
// 	  options: {
// 	    title: {
// 	      display: true,
// 	      text: 'Crescimento Mensal de Seguros Opus'
// 	    }
// 	  }
// 	});
</script>
